# ============================================================================
# HYPRIDLE CONFIG - Idle Management
# ============================================================================
#
# Behavior:
#   - 30 min idle → Screen off (ALWAYS, even with caffeine)
#   - 2 hours idle → Lock + Suspend (ONLY if caffeine OFF)
#
# Caffeine uses systemd-inhibit, which hypridle respects per-listener
# ============================================================================

general {
    lock_cmd = pidof hyprlock || hyprlock
    before_sleep_cmd = loginctl lock-session
    after_sleep_cmd = hyprctl dispatch dpms on
}

# ============================================================================
# SCREEN OFF - 30 minutes (1800 seconds)
# Always triggers, ignores caffeine/inhibitors
# ============================================================================
listener {
    timeout = 1800
    on-timeout = hyprctl dispatch dpms off
    on-resume = hyprctl dispatch dpms on
    ignore_systemd_inhibit = true
}

# ============================================================================
# LOCK - 1 hour 55 minutes (6900 seconds)
# Lock screen before suspend, respects caffeine
# ============================================================================
listener {
    timeout = 6900
    on-timeout = loginctl lock-session
}

# ============================================================================
# SUSPEND - 2 hours (7200 seconds)
# Only if caffeine is OFF (respects systemd inhibitors)
# ============================================================================
listener {
    timeout = 7200
    on-timeout = systemctl suspend
}
